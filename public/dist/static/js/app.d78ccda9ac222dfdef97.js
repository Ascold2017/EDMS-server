webpackJsonp([170],{"/DIP":function(t,e){t.exports={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content"},[e("h1",[this._v("404!")]),e("p",[this._v("Страница не найдена!")])])}]}},"/Djd":function(t,e,r){var n={"./78-EUC-H.bcmap":["0lHY",167],"./78-EUC-V.bcmap":["8cwC",166],"./78-H.bcmap":["Hj0Y",165],"./78-RKSJ-H.bcmap":["rDt0",164],"./78-RKSJ-V.bcmap":["69NQ",163],"./78-V.bcmap":["OfM+",162],"./78ms-RKSJ-H.bcmap":["uB/y",161],"./78ms-RKSJ-V.bcmap":["h5K9",160],"./83pv-RKSJ-H.bcmap":["9WfI",159],"./90ms-RKSJ-H.bcmap":["0WCd",158],"./90ms-RKSJ-V.bcmap":["IlPF",157],"./90msp-RKSJ-H.bcmap":["JgNn",156],"./90msp-RKSJ-V.bcmap":["vmWD",155],"./90pv-RKSJ-H.bcmap":["yxD0",154],"./90pv-RKSJ-V.bcmap":["5WXK",153],"./Add-H.bcmap":["xhCb",152],"./Add-RKSJ-H.bcmap":["6VbT",151],"./Add-RKSJ-V.bcmap":["RLMU",150],"./Add-V.bcmap":["yp9I",149],"./Adobe-CNS1-0.bcmap":["hUem",148],"./Adobe-CNS1-1.bcmap":["ino3",147],"./Adobe-CNS1-2.bcmap":["ibfO",146],"./Adobe-CNS1-3.bcmap":["GiTj",145],"./Adobe-CNS1-4.bcmap":["hsjj",144],"./Adobe-CNS1-5.bcmap":["YRpi",143],"./Adobe-CNS1-6.bcmap":["w8o3",142],"./Adobe-CNS1-UCS2.bcmap":["rX6d",141],"./Adobe-GB1-0.bcmap":["iD5p",140],"./Adobe-GB1-1.bcmap":["4jEs",139],"./Adobe-GB1-2.bcmap":["Afaj",138],"./Adobe-GB1-3.bcmap":["toY7",137],"./Adobe-GB1-4.bcmap":["faDD",136],"./Adobe-GB1-5.bcmap":["4gVq",135],"./Adobe-GB1-UCS2.bcmap":["L8gf",134],"./Adobe-Japan1-0.bcmap":["hIDG",133],"./Adobe-Japan1-1.bcmap":["iPSW",132],"./Adobe-Japan1-2.bcmap":["S/ep",131],"./Adobe-Japan1-3.bcmap":["YhiS",130],"./Adobe-Japan1-4.bcmap":["wm/L",129],"./Adobe-Japan1-5.bcmap":["Zkyi",128],"./Adobe-Japan1-6.bcmap":["aB41",127],"./Adobe-Japan1-UCS2.bcmap":["2Us0",126],"./Adobe-Korea1-0.bcmap":["Mv2w",125],"./Adobe-Korea1-1.bcmap":["s/Eq",124],"./Adobe-Korea1-2.bcmap":["3o6+",123],"./Adobe-Korea1-UCS2.bcmap":["SV2h",122],"./B5-H.bcmap":["HF7q",121],"./B5-V.bcmap":["fwp9",120],"./B5pc-H.bcmap":["rWMu",119],"./B5pc-V.bcmap":["xFEU",118],"./CNS-EUC-H.bcmap":["B0Kb",117],"./CNS-EUC-V.bcmap":["azx/",116],"./CNS1-H.bcmap":["p4ms",115],"./CNS1-V.bcmap":["9eW7",114],"./CNS2-H.bcmap":["zc6H",113],"./CNS2-V.bcmap":["dvni",112],"./ETHK-B5-H.bcmap":["EOs2",111],"./ETHK-B5-V.bcmap":["3Wsc",110],"./ETen-B5-H.bcmap":["gQjr",109],"./ETen-B5-V.bcmap":["kLXg",108],"./ETenms-B5-H.bcmap":["imo+",107],"./ETenms-B5-V.bcmap":["zm2u",106],"./EUC-H.bcmap":["Q2D6",105],"./EUC-V.bcmap":["k2qw",104],"./Ext-H.bcmap":["YgQs",103],"./Ext-RKSJ-H.bcmap":["hIym",102],"./Ext-RKSJ-V.bcmap":["N32G",101],"./Ext-V.bcmap":["M1wV",100],"./GB-EUC-H.bcmap":["HcIz",99],"./GB-EUC-V.bcmap":["UJd/",98],"./GB-H.bcmap":["IhXA",97],"./GB-V.bcmap":["hcdP",96],"./GBK-EUC-H.bcmap":["1Knm",95],"./GBK-EUC-V.bcmap":["YMus",94],"./GBK2K-H.bcmap":["nBsz",93],"./GBK2K-V.bcmap":["vkSo",92],"./GBKp-EUC-H.bcmap":["dk46",91],"./GBKp-EUC-V.bcmap":["cDOd",90],"./GBT-EUC-H.bcmap":["DdPg",89],"./GBT-EUC-V.bcmap":["hqV7",88],"./GBT-H.bcmap":["7XA5",87],"./GBT-V.bcmap":["qhQE",86],"./GBTpc-EUC-H.bcmap":["1Eun",85],"./GBTpc-EUC-V.bcmap":["849d",84],"./GBpc-EUC-H.bcmap":["A4XZ",83],"./GBpc-EUC-V.bcmap":["an5Q",82],"./H.bcmap":["jg+6",81],"./HKdla-B5-H.bcmap":["dKoA",80],"./HKdla-B5-V.bcmap":["Axzi",79],"./HKdlb-B5-H.bcmap":["Z6Fe",78],"./HKdlb-B5-V.bcmap":["Swbl",77],"./HKgccs-B5-H.bcmap":["4mx8",76],"./HKgccs-B5-V.bcmap":["TbQ6",75],"./HKm314-B5-H.bcmap":["zfm+",74],"./HKm314-B5-V.bcmap":["lr6o",73],"./HKm471-B5-H.bcmap":["EyHw",72],"./HKm471-B5-V.bcmap":["YRl9",71],"./HKscs-B5-H.bcmap":["mP3G",70],"./HKscs-B5-V.bcmap":["6sQV",69],"./Hankaku.bcmap":["Boma",68],"./Hiragana.bcmap":["Aqml",67],"./KSC-EUC-H.bcmap":["RBad",66],"./KSC-EUC-V.bcmap":["C6eU",65],"./KSC-H.bcmap":["Q2pl",64],"./KSC-Johab-H.bcmap":["330r",63],"./KSC-Johab-V.bcmap":["jriO",62],"./KSC-V.bcmap":["qRx5",61],"./KSCms-UHC-H.bcmap":["xEph",60],"./KSCms-UHC-HW-H.bcmap":["JSwJ",59],"./KSCms-UHC-HW-V.bcmap":["G/Oj",58],"./KSCms-UHC-V.bcmap":["/RsT",57],"./KSCpc-EUC-H.bcmap":["D4WR",56],"./KSCpc-EUC-V.bcmap":["OqUO",55],"./Katakana.bcmap":["clhU",54],"./NWP-H.bcmap":["xDZB",53],"./NWP-V.bcmap":["lHHt",52],"./RKSJ-H.bcmap":["1bQs",51],"./RKSJ-V.bcmap":["KD7s",50],"./Roman.bcmap":["KDYN",49],"./UniCNS-UCS2-H.bcmap":["bBFw",48],"./UniCNS-UCS2-V.bcmap":["ne9Q",47],"./UniCNS-UTF16-H.bcmap":["7mve",46],"./UniCNS-UTF16-V.bcmap":["fDmo",45],"./UniCNS-UTF32-H.bcmap":["oBG3",44],"./UniCNS-UTF32-V.bcmap":["R8UX",43],"./UniCNS-UTF8-H.bcmap":["9p4U",42],"./UniCNS-UTF8-V.bcmap":["mrGD",41],"./UniGB-UCS2-H.bcmap":["8bey",40],"./UniGB-UCS2-V.bcmap":["lngy",39],"./UniGB-UTF16-H.bcmap":["Jjcy",38],"./UniGB-UTF16-V.bcmap":["0PdA",37],"./UniGB-UTF32-H.bcmap":["nl8J",36],"./UniGB-UTF32-V.bcmap":["k/6v",35],"./UniGB-UTF8-H.bcmap":["5y08",34],"./UniGB-UTF8-V.bcmap":["Mx+T",33],"./UniJIS-UCS2-H.bcmap":["h4hU",32],"./UniJIS-UCS2-HW-H.bcmap":["Uz5R",31],"./UniJIS-UCS2-HW-V.bcmap":["LdTY",30],"./UniJIS-UCS2-V.bcmap":["cBwd",29],"./UniJIS-UTF16-H.bcmap":["+S0o",28],"./UniJIS-UTF16-V.bcmap":["VEBc",27],"./UniJIS-UTF32-H.bcmap":["m4Cs",26],"./UniJIS-UTF32-V.bcmap":["dWl0",25],"./UniJIS-UTF8-H.bcmap":["leWl",24],"./UniJIS-UTF8-V.bcmap":["ulcQ",23],"./UniJIS2004-UTF16-H.bcmap":["fZfZ",22],"./UniJIS2004-UTF16-V.bcmap":["yeFf",21],"./UniJIS2004-UTF32-H.bcmap":["StCN",20],"./UniJIS2004-UTF32-V.bcmap":["4axz",19],"./UniJIS2004-UTF8-H.bcmap":["petH",18],"./UniJIS2004-UTF8-V.bcmap":["ebP/",17],"./UniJISPro-UCS2-HW-V.bcmap":["bJiI",16],"./UniJISPro-UCS2-V.bcmap":["eCeG",15],"./UniJISPro-UTF8-V.bcmap":["gGQY",14],"./UniJISX0213-UTF32-H.bcmap":["yvQh",13],"./UniJISX0213-UTF32-V.bcmap":["/rlZ",12],"./UniJISX02132004-UTF32-H.bcmap":["0dQZ",11],"./UniJISX02132004-UTF32-V.bcmap":["+GS9",10],"./UniKS-UCS2-H.bcmap":["fGKg",9],"./UniKS-UCS2-V.bcmap":["X3cO",8],"./UniKS-UTF16-H.bcmap":["TMpY",7],"./UniKS-UTF16-V.bcmap":["hTx4",6],"./UniKS-UTF32-H.bcmap":["kbYn",5],"./UniKS-UTF32-V.bcmap":["t4S0",4],"./UniKS-UTF8-H.bcmap":["6InH",3],"./UniKS-UTF8-V.bcmap":["oEkN",2],"./V.bcmap":["xBln",1],"./WP-Symbol.bcmap":["A12k",0]};function s(t){var e=n[t];return e?r.e(e[1]).then(function(){return r(e[0])}):Promise.reject(new Error("Cannot find module '"+t+"'."))}s.keys=function(){return Object.keys(n)},s.id="/Djd",t.exports=s},"/W3O":function(t,e){},0:function(t,e){},"0QnP":function(t,e){},1:function(t,e){},"1/oy":function(t,e){},"1GYb":function(t,e,r){var n=r("VU/8")(r("OQeb"),r("kpRs"),!1,null,null,null);t.exports=n.exports},"1Pqu":function(t,e,r){var n=r("VU/8")(r("6Xwc"),r("cfAL"),!1,function(t){r("BJWR")},"data-v-54c6295e",null);t.exports=n.exports},2:function(t,e){},3:function(t,e){},4:function(t,e){},"4z3Q":function(t,e,r){var n=r("VU/8")(r("ePUA"),r("ITPQ"),!1,null,null,null);t.exports=n.exports},"6Xwc":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Dd8w"),s=r.n(n),o=r("NYxO");e.default={data:function(){return{route:this.$router.currentRoute.fullPath}},computed:s()({},Object(o.c)("usersStore",["currentUser"]),{show:function(){var t=this.$route.fullPath,e=this.currentUser.role;return"/"===t||"/auth"===t||"/registration"===t?"indexBar":"Admin"===e?"adminBar":"superAdmin"===e?"superadminBar":"userBar"}}),methods:s()({},Object(o.b)(["logout"]),{logOut:function(){this.$router.push("/"),this.logout()}})}},"6acm":function(t,e,r){var n=r("VU/8")(r("Kp36"),r("rz9y"),!1,null,null,null);t.exports=n.exports},"83MH":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("BO1k"),s=r.n(n),o=r("Dd8w"),a=r.n(o),i=r("NYxO");e.default={data:function(){return{authorNameOrRole:"",selectedPreset:[]}},props:{selectedUsers:Array},computed:a()({},Object(i.c)("usersStore",["users"]),Object(i.c)("docsStore",["presets"]),{computedUsers:function(){var t=this,e=function(e){return t.selectedUsers.length?e.filter(function(e){return t.selectedUsers.find(function(t){return t._id===e._id})?null:e}):e};return this.authorNameOrRole?e(this.users.filter(function(e){var r=-1!==e.author.toLowerCase().indexOf(t.authorNameOrRole.toLowerCase()),n=-1!==e.role.toLowerCase().indexOf(t.authorNameOrRole.toLowerCase());return r||n?e:null})):e(this.users)},presetsOptions:function(){var t=[{value:[],text:"Не выбрано"}],e=!0,r=!1,n=void 0;try{for(var o,a=s()(this.presets);!(e=(o=a.next()).done);e=!0){var i=o.value;t.push({value:i.routes,text:i.title})}}catch(t){r=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(r)throw n}}return t}}),methods:a()({},Object(i.b)("docsStore",["getPresets"]),{addAuthor:function(t){this.selectedUsers.length?t.canSee="no":t.canSee="yes",t.status="waiting",this.selectedUsers.push(a()({},t)),this.$emit("updateSelectedUsers",this.selectedUsers)}}),watch:{selectedPreset:function(){this.$emit("updateSelectedUsers",this.selectedPreset)}},created:function(){this.getPresets()}}},"8Y90":function(t,e){},"8xUL":function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("app-header"),e("router-view"),e("app-footer")],1)},staticRenderFns:[]}},A9Dh:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.document.versions?r("b-tabs",{staticClass:"mb-3"},[r("b-tab",{staticStyle:{padding:"20px 0 0"},attrs:{title:"Последняя версия документа"}},[r("p",{staticClass:"text ml-3"},[t._v("Описание: "+t._s(t.document.versions[0].description))]),r("p",{staticClass:"text ml-3"},[t._v(t._s(t.checked))]),r("pdf-reader",{attrs:{src:t.document.versions[0].file}})],1),t._l(t.document.versions.filter(function(t,e){return 0!==e}),function(e){return t.document.versions.length>1?r("b-tab",{key:e._id,staticStyle:{padding:"20px 0 0"},attrs:{title:"Версия документа: "+e.version}},[r("p",{staticClass:"text ml-3"},[t._v(t._s(e.rejectReason))]),r("p",{staticClass:"text ml-3"},[t._v("Описание: "+t._s(e.description))]),r("pdf-reader",{attrs:{src:e.file}})],1):t._e()})],2):t._e()},staticRenderFns:[]}},AgTH:function(t,e){},BJWR:function(t,e){},BNfl:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Dd8w"),s=r.n(n),o=r("0AuC"),a=(r.n(o),r("NYxO"));e.default={data:function(){return{date:{startDate:null,endDate:null},loadedStat:!1,showCalendar:!1,title:"все время"}},computed:s()({},Object(a.c)("statStore",["docsCreated","docsSigned","docsRejected","docsTimingSign","docsTimingResolve","usersStat"])),methods:s()({},Object(a.b)("statStore",["getDocsStat"]),Object(a.d)("statStore",["setRange"]),{submitStat:function(){var t=Date.parse(this.date.startDate._d),e=Date.parse(this.date.endDate._d);this.title="период с "+this.toDateString(t)+" по "+this.toDateString(e),this.setRange({start:t,end:e}),this.showCalendar=!1}}),created:function(){var t=this;this.getDocsStat().then(function(e){t.loadedStat=!0})},components:{DateRange:o.DateRange}}},Bio6:function(t,e,r){var n=r("VU/8")(r("NiK3"),r("CpDz"),!1,null,null,null);t.exports=n.exports},BwF3:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{date:""}},methods:{timer:function(){var t=this;setInterval(function(){var e=new Date,r=e.getDate()<10?"0"+e.getDate():e.getDate(),n=e.getMonth()<10?"0"+(e.getMonth()+1):e.getMonth()+1,s=e.getHours()<10?"0"+e.getHours():e.getHours(),o=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),a=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();t.date=r+"."+n+"."+e.getFullYear()+" - "+s+":"+o+":"+a,t.$emit("dateUpdate",t.date)},1e3)}},created:function(){this.timer()}}},C1H1:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("b-container",[e("section",{staticClass:"admin"},[e("h1",{staticClass:"title mb-3"},[this._v("Панель главного администратора EDMS")]),e("b-tabs",[e("b-tab",{attrs:{title:"Создать новую группу"}},[e("create-group",{staticClass:"mt-3",on:{alert:this.openInfo}})],1),e("b-tab",{attrs:{title:"Создать нового администратора"}},[e("create-admin",{staticClass:"mt-3",on:{alert:this.openInfo}})],1),e("b-tab",{attrs:{title:"Группы"}},[e("groups-list",{staticClass:"mt-3",on:{alert:this.openInfo}})],1)],1)],1),e("b-modal",{ref:"infoModal",attrs:{title:"Сообщение"}},[this._v(this._s(this.info))])],1)},staticRenderFns:[]}},CEYO:function(t,e){},CpDz:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bg-simple"},[r("b-container",[r("b-list-group",[t.loaded?t._e():r("b-alert",{attrs:{variant:"primary",show:"show"}},[t._v("Загрузка...")]),t.loaded&&!t.sortingData.length?r("b-alert",{attrs:{variant:"danger",show:"show"}},[t._v("У вас нет опубликованных документов!")]):t._e(),t._l(t.sortingData,function(e){return r("router-link",{key:e._id,staticClass:"list-group-item preview-item list-group-item-action",attrs:{to:"/edms/myDocuments/"+e._id}},[r("div",{staticClass:"preview-item__icon",class:e.globalStatus},[r("i",{staticClass:"fa fa-file-text-o",attrs:{"aria-hidden":"true"}})]),r("h2",{staticClass:"preview-item__title"},[t._v(t._s(e.title))]),r("time",{staticClass:"preview-item__date"},[t._v(t._s(t.toDateString(+e.date)))])])})],2)],1)],1)},staticRenderFns:[]}},DB7B:function(t,e,r){var n=r("VU/8")(r("sw/x"),r("SPHP"),!1,null,null,null);t.exports=n.exports},DL3K:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Dd8w"),s=r.n(n),o=r("NYxO");e.default={data:function(){return{groupName:"",adminEmail:"",info:""}},methods:s()({},Object(o.b)("groupsStore",["createNewGroup"]),{createGroup:function(){this.$refs.alertModal.show()},submitForm:function(){var t=this;this.createNewGroup({groupName:this.groupName,adminEmail:this.adminEmail}).then(function(e){t.$refs.createGroupForm.reset(),t.$emit("alert",e.message)}).catch(function(e){return t.$emit("alert",e.message)})}})}},EHk7:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bg-simple"},[r("b-container",[r("b-row",[r("b-col",{staticClass:"mb-3",attrs:{sm:"12"}},[r("b-card",[r("h1",{staticClass:"title"},[t._v(t._s(t.document.title))])])],1),r("b-col",{staticClass:"mb-3",attrs:{sm:"12"}},[t.document.author&&t.document.date&&t.document.versions?r("b-card",[r("p",{staticClass:"text"},[t._v("Автор публикации "+t._s(t.document.author))]),r("time",{staticClass:"text"},[t._v("Дата первой публикации "+t._s(t.toDateString(+t.document.date)))]),t.document.versions.length>1?r("div",[r("p",{staticClass:"text"},[t._v("Текущая версия документа "+t._s(t.document.versions[0].version))]),r("time",{staticClass:"text"},[t._v("Дата публикации версии "+t._s(t.document.versions[0].version)+": "+t._s(t.toDateString(+t.document.versions[0].date)))])]):t._e()]):t._e()],1)],1),r("b-row",[r("b-col",[r("doc-tabs")],1)],1),r("b-row",[r("b-col",{attrs:{sm:"12",lg:"6"}},[r("signers-list",{attrs:{rejected:t.rejected}})],1),r("b-col",{attrs:{sm:"12",lg:"6"}},[r("b-form",{on:{submit:function(e){e.preventDefault(),t.submitDoc(e)}}},[r("b-card",[r("b-form-group",{attrs:{label:"Выберите действие"}},[r("b-form-radio-group",{attrs:{name:"radioSubComponent",options:t.options},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),r("b-form-group",{attrs:{label:"Ваш комментарий"}},[r("b-form-textarea",{attrs:{placeholder:"Оставьте комментарий",rows:3,"max-rows":6,required:"required"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1),r("b-button",{attrs:{type:"submit"}},[t._v("Отправить")])],1)],1)],1)],1)],1),r("b-modal",{ref:"alertModal",attrs:{"hide-footer":"hide-footer"}},[t._v(t._s(t.infoAlert))])],1)},staticRenderFns:[]}},GHAU:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"reader",attrs:{id:"pdfjs"}},t._l(t.numPages,function(e){return r("pdf",{key:e,staticStyle:{display:"block"},attrs:{src:t.loadingTask,page:e}})}))},staticRenderFns:[]}},HqJY:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bg-simple"},[r("b-container",[r("b-list-group",[t.loaded?t._e():r("b-alert",{attrs:{variant:"primary",show:"show"}},[t._v("Загрузка...")]),t.loaded&&!t.sortingData.length?r("b-alert",{attrs:{variant:"danger",show:"show"}},[t._v("Доступных документов нет")]):t._e(),t._l(t.sortingData,function(e){return r("router-link",{key:e._id,staticClass:"list-group-item preview-item list-group-item-action",attrs:{to:"/edms/archive/"+e._id}},[r("div",{staticClass:"preview-item__icon",class:e.globalStatus},[r("i",{staticClass:"fa fa-file-text-o",attrs:{"aria-hidden":"true"}})]),r("h2",{staticClass:"preview-item__title"},[t._v(t._s(e.title))]),r("time",{staticClass:"preview-item__date"},[t._v(t._s(t.toDateString(+e.date)))])])})],2)],1)],1)},staticRenderFns:[]}},IPEZ:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Dd8w"),s=r.n(n),o=r("NYxO"),a=r("f5j3");e.default={data:function(){return{user:{role:"",email:"",login:"",name:"",certTime:0},info:""}},computed:s()({},Object(o.c)("groupsStore",["groups"]),Object(o.c)("usersStore",["currentUser"]),{users:function(){return this.groups[0].users},group:function(){return this.groups[0]}}),methods:s()({},Object(o.b)("groupsStore",["createNewUser","getCurrentGroup"]),Object(o.b)("usersStore",["createKeys"]),{toDateString:a.a,createUser:function(t){var e=this;this.createNewUser(s()({},this.user,{group:this.group._id})).then(function(r){t.target.reset(),e.info=r.message,e.$refs.infoModal.show()}).catch(function(t){e.info=t.message,e.$refs.infoModal.show()})}}),components:{usersStat:r("jDSw")}}},ITPQ:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-card",[r("b-form-group",{attrs:{label:"Создать новый список виз"}},[r("b-btn",{attrs:{type:"button"},on:{click:t.showEditor}},[t._v("Открыть редактор")])],1),r("b-modal",{ref:"routesEditor",attrs:{title:"Создать новый Маршрут","hide-footer":"hide-footer"}},[r("b-form",{on:{submit:function(e){e.preventDefault(),e.stopPropagation(),t.createNewPreset(e)}}},[r("b-form-group",{attrs:{label:"Задайте название Списка"}},[r("b-form-input",{attrs:{id:"presetname",type:"text",required:"required",placeholder:"Введите название списка"},model:{value:t.presetName,callback:function(e){t.presetName=e},expression:"presetName"}})],1),r("choose-authors",{attrs:{selectedUsers:t.selectedUsers},on:{updateSelectedUsers:t.updatePresetRoute}}),r("authors-list",{attrs:{selectedUsers:t.selectedUsers},on:{updateSelectedUser:t.updatePresetRoute}}),r("b-btn",{attrs:{type:"submit"}},[t._v("Создать Маршрут")])],1)],1)],1)},staticRenderFns:[]}},IUVv:function(t,e,r){var n=r("VU/8")(r("83MH"),r("OUKj"),!1,function(t){r("/W3O")},"data-v-f359a73c",null);t.exports=n.exports},IXLF:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-form-group",{staticClass:"mt-3",attrs:{label:"Выбрать промежуток среза статистики"}},[r("b-button",{attrs:{type:"button"},on:{click:function(e){t.showCalendar=!t.showCalendar}}},[t._v("Открыть календарь")])],1),r("h4",[t._v("Статистика за "+t._s(t.title))]),r("p",[t._v("Создано документов за период: "+t._s(t.docsCreated))]),r("p",[t._v("Подписано документов за период: "+t._s(t.docsSigned))]),r("p",[t._v("Отказано документов за период: "+t._s(t.docsRejected))]),r("p",[t._v("Среднее время между созданием и финальным подписанием документ: "+t._s(t.docsTimingResolve))]),r("p",[t._v("Среднее время одной подписи: "+t._s(t.docsTimingSign))]),r("h4",[t._v("Статистика по ролям:")]),r("b-table",{attrs:{striped:"striped",bordered:"bordered",hover:"hover",fields:t.usersStat.fields,items:t.usersStat.items}}),r("b-button",{attrs:{type:"button"},on:{click:t.submitStat}},[t._v("Получить статистику")]),r("b-modal",{attrs:{title:"Выбрать промежуток среза статистики","hide-footer":"hide-footer"},model:{value:t.showCalendar,callback:function(e){t.showCalendar=e},expression:"showCalendar"}},[r("date-range",{staticClass:"calendar",attrs:{"first-day-of-week":1,lang:"ru"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1)},staticRenderFns:[]}},Id91:function(t,e){},IiRR:function(t,e,r){var n=r("VU/8")(r("humj"),r("Y2OG"),!1,function(t){r("YZST")},"data-v-59ea7822",null);t.exports=n.exports},JPyM:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-row",[r("b-col",[r("b-form",{ref:"createAdminForm",on:{submit:function(e){e.preventDefault(),t.createAdmin(e)}}},[r("h2",{staticClass:"subtitle"},[t._v("Создать администратора группы")]),r("b-form-group",{attrs:{label:"Выберите группу:",description:"Группа, для которой создать администратора"}},[r("b-form-select",{staticClass:"mb-3",attrs:{options:t.groupsOptions},model:{value:t.admin.groupId,callback:function(e){t.$set(t.admin,"groupId",e)},expression:"admin.groupId"}})],1),r("b-form-group",{attrs:{label:"e-mail администратора группы",description:"Внимание! На этот адрес будут высланы данные авторизации!"}},[r("b-form-input",{attrs:{type:"email",placeholder:"example@gmail.com",required:"required"},model:{value:t.admin.email,callback:function(e){t.$set(t.admin,"email",e)},expression:"admin.email"}})],1),r("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Создать администратора")])],1)],1)],1)},staticRenderFns:[]}},Jncd:function(t,e){},KLGY:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Dd8w"),s=r.n(n),o=r("NYxO"),a=r("f5j3");e.default={data:function(){return{loaded:!1}},computed:s()({},Object(o.c)("docsStore",["documents"]),{sortingData:function(){return this.documents.length?this.documents.slice(0).sort(function(t,e){return t.date<=e.date}):[]}}),methods:s()({},Object(o.b)("docsStore",["getArchiveDocuments"]),{toDateString:a.a}),created:function(){var t=this;this.getArchiveDocuments().then(function(){t.loaded=!0})}}},Kp36:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("DAYN"),s=r.n(n);e.default={props:{selectedUsers:Array},methods:{removeAuthor:function(t){0===this.selectedUsers.indexOf(t)&&this.selectedUsers[1]&&(this.selectedUsers[1].canSee="yes"),this.$emit("updateSelectedUser",this.selectedUsers.filter(function(e){return e._id!==t._id}))}},watch:{selectedUsers:function(t){t.map(function(e){return 0===t.indexOf(e)?e.canSee="yes":e.canSee="no",e}),this.$emit("updateSelectedUser",t)}},components:{draggable:s.a}}},LD2M:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Dd8w"),s=r.n(n),o=r("NYxO");e.default={data:function(){return{date:"",docVersion:"",docDescription:"",file:"",infoAlert:"",previewDoc:"",id:this.$router.currentRoute.params.id}},computed:s()({},Object(o.c)("docsStore",["document"])),methods:s()({},Object(o.b)("docsStore",["addNewDocumentVersion","getMyDocumentById"]),{dateUpd:function(t){this.date=t},getFile:function(t){var e=t.target.files[0];e&&(e.size/1024>5e4?this.showAlert("Загружаемый файл должен быть меньше 50 МБ!"):(this.file=e,this.previewDoc=""+URL.createObjectURL(e)))},addNewVersion:function(t){var e=this,r=new FormData;r.append("id",this.document._id),r.append("date",Date.now()),r.append("file",this.file),r.append("version",this.docVersion),r.append("description",this.docDescription),this.addNewDocumentVersion(r).then(function(r){e.showAlert(r.message),t.target.reset(),e.$refs.fileInput.reset(),setTimeout(function(){return e.$router.push("edms")},3e3)}).catch(function(t){e.showAlert(t.message)})},showAlert:function(t){this.infoAlert=t,this.$refs.alertModal.show()}}),created:function(){var t=this;this.getMyDocumentById(this.id).catch(function(e){t.$router.push("404")})},components:{appTimer:r("jGXC"),pdfReader:r("XPmI")}}},M93x:function(t,e,r){var n=r("VU/8")(r("xJD8"),r("8xUL"),!1,null,null,null);t.exports=n.exports},MbgV:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{initial:{type:Boolean,default:!1}},data:function(){return{size:{width:-1,height:-1}}},methods:{reset:function(){var t=this.$el.firstChild,e=this.$el.lastChild;t.scrollLeft=1e5,t.scrollTop=1e5,e.scrollLeft=1e5,e.scrollTop=1e5},update:function(){this.size.width=this.$el.offsetWidth,this.size.height=this.$el.offsetHeight}},watch:{size:{deep:!0,handler:function(t){this.reset(),this.$emit("resize",{width:this.size.width,height:this.size.height})}}},render:function(t){var e="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",r="position: absolute; left: 0; top: 0;";return t("div",{style:e+"animation-name: resizeSensorVisibility;",on:{"~animationstart":this.update}},[t("div",{style:e,on:{scroll:this.update}},[t("div",{style:r+"width: 100000px; height: 100000px;"})]),t("div",{style:e,on:{scroll:this.update}},[t("div",{style:r+"width: 200%; height: 200%;"})])])},beforeDestroy:function(){this.$emit("resize",{width:0,height:0}),this.$emit("resizeSensorBeforeDestroy")},mounted:function(){if(!0===this.initial&&this.$nextTick(this.update),this.$el.offsetParent!==this.$el.parentNode&&(this.$el.parentNode.style.position="relative"),"attachEvent"in this.$el&&!("AnimationEvent"in window)){var t=function(){this.update(),e()}.bind(this),e=function(){this.$el.detachEvent("onresize",t),this.$off("resizeSensorBeforeDestroy",e)}.bind(this);this.$el.attachEvent("onresize",t),this.$on("resizeSensorBeforeDestroy",e),this.reset()}}}},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("7+uW"),s=r("M93x"),o=r.n(s),a=r("//Fk"),i=r.n(a),c=r("NYxO"),u=r("mtWM"),l=r.n(u),d={usersApi:{getCurrentUser:function(t){return l.a.get("/api/getCurrentUser",t).then(function(t){return t.data}).catch(function(t){throw console.error(t),new Error(t)})},getAllUsersFromGroup:function(t){return l.a.get("/api/getAllUsers",t).then(function(t){return t.data}).catch(function(t){return console.log(t),[]})},createNewUser:function(t,e){return l.a.post("/api/createNewUser",t,e).catch(function(t){throw console.log(t),new Error(t)})},createKeys:function(t,e){var r=t.cert,n=t.userId;return l.a.post("/api/createNewKeys",{cert:r,userId:n},e).catch(function(t){throw console.log(t),new Error(t)})}},documentsApi:{getPreviewsJSON:function(t){return l.a.get("/api/getPreviews",t).then(function(t){return t.data}).catch(function(t){throw console.error(t),new Error(t)})},getDocumentByIdJSON:function(t,e){return l.a.get("/api/getDocument/"+t,e).then(function(t){return t.data}).catch(function(t){throw console.log(t),new Error(t)})},getFileContent:function(t,e){return l.a.get(""+t,e).then(function(t){return t.data}).catch(function(t){throw console.log(t),new Error(t)})},getMyDocumentByIdJSON:function(t,e){return l.a.get("/api/getMyDocument/"+t,e).then(function(t){return t.data}).catch(function(t){throw console.log(t),new Error(t)})},getPresets:function(t){return l.a.get("/api/getDocPresets",t).then(function(t){return t.data}).catch(function(t){throw new Error(t)})},getOurDocumentsPreview:function(t){return l.a.get("/api/getOurDocuments",t).then(function(t){return t.data}).catch(function(t){throw new Error(t)})},getArchiveDocuments:function(t){return l.a.get("/api/getArchiveDocuments",t).then(function(t){return t.data}).catch(function(t){throw new Error(t)})},getArchiveDocument:function(t,e){return l.a.get("/api/getArchiveDocument/"+t,e).then(function(t){return t.data}).catch(function(t){throw new Error(t)})},postVote:function(t,e){return l.a.post("/api/postVote",t,e).then(function(t){return t.data}).catch(function(t){throw console.error(t.response.data.message),new Error(t.response.data.message)})},postNewDocument:function(t,e){return l.a.post("/api/postNewDocument",t,e).then(function(t){return t.data}).catch(function(t){throw console.log(t),new Error(t)})},postNewVersion:function(t,e){return l.a.put("/api/postNewVersion",t,e).then(function(t){return t.data}).catch(function(t){throw console.log(t),new Error(t.response.data.message)})},createPreset:function(t,e){return l.a.post("/api/createPreset",t,e).then(function(t){return t.data}).catch(function(t){throw new Error(t)})},closeDocumentById:function(t,e){return console.log(t),l.a.post("/api/closeDocument",{id:t},e).then(function(t){return t.data}).catch(function(t){throw new Error(t)})},checkSigns:function(t,e){return l.a.get("/api/checkSigns/"+t,e).then(function(t){return t.data}).catch(function(t){throw new Error(t)})}},groupsApi:{getAllGroups:function(t){return l.a.get("/api/getAllGroups",t).then(function(t){return t.data}).catch(function(t){return[]})},getGroupByToken:function(t,e){return l.a.get("/api/getGroup/"+t,e).then(function(t){return t.data}).catch(function(t){return[]})},createNewGroup:function(t,e){return l.a.post("/api/createNewGroup",t,e).catch(function(t){throw new Error(t.response.data.message)})},createNewAdmin:function(t,e){return l.a.post("/api/createNewAdmin",t,e).catch(function(t){throw new Error(t.response.data.message)})},removeAdmin:function(t,e){var r=t.adminId,n=t.groupId;return l.a.delete("/api/removeAdmin/"+n+"/"+r,e).catch(function(t){throw new Error(t.response.data.message)})},sendInviteAdmin:function(t,e){return l.a.post("/api/sendInviteAdmin",t,e).catch(function(t){throw new Error(t.response.data.message)})}},statApi:{getDocsStat:function(t){return l.a.get("/api/getDocsStat",t).then(function(t){return t.data}).catch(function(t){throw new Error(t.response.data.message)})}},logIn:function(t){return l.a.post("/api/signIn",t).then(function(t){return t.data}).catch(function(t){throw new Error(t.response.data.error)})},logInAdmin:function(t){return l.a.post("/api/signInAdmin",t).then(function(t){return t.data}).catch(function(t){throw new Error(t.response.data.error)})},logout:function(){return l.a.post("/api/logout").then(function(t){return t.data}).catch(function(t){throw new Error(t.response)})},sendMail:function(t,e){return l.a.post("/api/mail",t,e).then(function(t){return t.data}).catch(function(t){throw new Error(t.response)})},signUp:function(t){return l.a.post("/api/signUp",t).then(function(t){return t.data}).catch(function(t){throw new Error(t.response.error)})}},m={namespaced:!0,state:{data:[],user:{}},getters:{users:function(t){return t.data},currentUser:function(t){return t.user}},mutations:{setUser:function(t,e){t.user=e}},actions:{getAllUsersFromGroup:function(t){d.usersApi.getAllUsersFromGroup(S.getters.headerToken).then(function(e){t.state.data=e}).catch(function(t){return[]})},getCurrentUser:function(t){return new i.a(function(e,r){d.usersApi.getCurrentUser(S.getters.headerToken).then(function(r){t.commit("setUser",r),e()}).catch(function(t){return r(t)})})},sendMail:function(t,e){return d.sendMail(e,S.getters.headerToken).then(function(t){return t})},createKeys:function(t,e){var r=e.cert,n=e.userId;return d.usersApi.createKeys({cert:r,userId:n},S.getters.headerToken).then(function(t){return t.data}).catch(function(t){throw new Error(t.message)})}}},p=r("Dd8w"),f=r.n(p),h=r("aMZi"),b={namespaced:!0,state:{documents:[],presets:[],document:{},checked:null},getters:{documents:function(t){return t.documents},document:function(t){return t.document},presets:function(t){return t.presets},checked:function(t){return t.checked}},mutations:{},actions:{getPreviews:function(t){return d.documentsApi.getPreviewsJSON(S.getters.headerToken).then(function(e){t.state.documents=e}).catch(function(t){throw new Error(t)})},getDocumentById:function(t,e){return d.documentsApi.getDocumentByIdJSON(e,S.getters.headerToken).then(function(e){return t.state.document=e,t.dispatch("checkSigns"),null}).catch(function(t){throw new Error(t)})},getMyDocumentById:function(t,e){return d.documentsApi.getMyDocumentByIdJSON(e,S.getters.headerToken).then(function(e){return t.state.document=e,t.dispatch("checkSigns"),null}).catch(function(t){throw new Error(t)})},postVote:function(t,e){var r=e.id,n=e.vote,s=e.comment,o=e.author;if("resolve"===n){var a=S.getters.privateKey;console.log("PrivateKey:",a);var c="";return d.documentsApi.getFileContent(t.state.document.versions[0].file,f()({},S.getters.headerToken,{responseType:"blob"})).then(function(t){return new i.a(function(e,r){var n=new FileReader;n.onload=function(t){c=new Uint8Array(t.target.result),console.log(c),e(c)},n.readAsArrayBuffer(t)})}).then(function(t){var e={data:t,privateKeys:a,detached:!0};return h.sign(e)}).then(function(t){return d.documentsApi.postVote({id:r,vote:n,comment:s,author:o,signature:t.signature,file:c},S.getters.headerToken).then(function(t){return t})}).catch(function(t){throw new Error(t.message||t)})}return d.documentsApi.postVote({id:r,vote:n,comment:s,author:o,signature:null},S.getters.headerToken).then(function(t){return t}).catch(function(t){throw new Error(t.message)})},addNewDocument:function(t,e){return d.documentsApi.postNewDocument(e,S.getters.headerToken).then(function(t){return t}).catch(function(t){throw new Error(t.message)})},addNewDocumentVersion:function(t,e){return d.documentsApi.postNewVersion(e,S.getters.headerToken).then(function(t){return t}).catch(function(t){throw new Error(t.message)})},getPresets:function(t){d.documentsApi.getPresets(S.getters.headerToken).then(function(e){t.state.presets=e}).catch(function(t){throw new Error(t)})},createPreset:function(t,e){return d.documentsApi.createPreset(e,S.getters.headerToken).then(function(t){return t}).catch(function(t){throw new Error(t)})},getOurDocuments:function(t){return d.documentsApi.getOurDocumentsPreview(S.getters.headerToken).then(function(e){return t.state.documents=e,null}).catch(function(t){throw new Error(t)})},getArchiveDocuments:function(t){return d.documentsApi.getArchiveDocuments(S.getters.headerToken).then(function(e){return t.state.documents=e,null}).catch(function(t){throw new Error(t)})},getArchiveDocumentById:function(t,e){return d.documentsApi.getArchiveDocument(e,S.getters.headerToken).then(function(e){return t.state.document=e,t.dispatch("checkSigns"),null}).catch(function(t){throw new Error(t)})},closeDocumentById:function(t,e){return d.documentsApi.closeDocumentById(e,S.getters.headerToken).catch(function(t){throw new Error(t)})},checkSigns:function(t){return d.documentsApi.checkSigns(t.state.document._id,S.getters.headerToken).then(function(e){t.state.checked=e.message}).catch(function(t){throw new Error(t.message)})}}},g={namespaced:!0,state:{data:[]},getters:{groups:function(t){return t.data}},actions:{getAllGroups:function(t){return d.groupsApi.getAllGroups(S.getters.headerToken).then(function(e){return t.state.data=e,null})},getCurrentGroup:function(t){return console.log(S.getters["usersStore/currentUser"].groupInvite),d.groupsApi.getGroupByToken(S.getters["usersStore/currentUser"].groupInvite,S.getters.headerToken).then(function(e){return t.state.data=e,null}).catch(function(t){throw new Error(t)})},createNewGroup:function(t,e){var r={name:e.groupName,adminEmail:e.adminEmail};return d.groupsApi.createNewGroup(r,S.getters.headerToken).then(function(e){return t.dispatch("getAllGroups"),e.data}).catch(function(t){throw new Error(t.message)})},createNewAdmin:function(t,e){var r={adminEmail:e.email,groupId:e.groupId};return d.groupsApi.createNewAdmin(r,S.getters.headerToken).then(function(e){return t.dispatch("getAllGroups"),e.data}).catch(function(t){throw new Error(t.message)})},removeAdmin:function(t,e){var r=e.adminId,n=e.groupId;return d.groupsApi.removeAdmin({adminId:r,groupId:n},S.getters.headerToken).then(function(e){return t.dispatch("getAllGroups"),e.data}).catch(function(t){throw new Error(t.message)})},sendInviteAdmin:function(t,e){var r=f()({},e);return d.groupsApi.sendInviteAdmin(r,S.getters.headerToken).then(function(e){return t.dispatch("getAllGroups"),e.data}).catch(function(t){throw new Error(t.message)})},createNewUser:function(t,e){return d.usersApi.createNewUser(e,S.getters.headerToken).then(function(e){return t.dispatch("getCurrentGroup"),e.data}).catch(function(t){throw new Error(t)})}}},v=function(t){var e=parseInt(t/1e3%60),r=parseInt(t/6e4%60),n=parseInt(t/36e5%24);return{hours:n=n<10?"0"+n:""+n,minutes:r=r<10?"0"+r:""+r,seconds:e=e<10?"0"+e:""+e}},_={namespaced:!0,state:{docs:[],dateRange:{start:0,end:1/0}},mutations:{setRange:function(t,e){t.dateRange=e}},getters:{docsCreated:function(t){return t.docs.filter(function(e){return e.date>=t.dateRange.start&&e.date<=t.dateRange.end}).length},docsSigned:function(t){return t.docs.filter(function(t){return"resolved"===t.globalStatus}).filter(function(e){return e.date>=t.dateRange.start&&e.date<=t.dateRange.end}).length},docsRejected:function(t){return t.docs.filter(function(t){return"archived"===t.globalStatus}).filter(function(e){return e.date>=t.dateRange.start&&e.date<=t.dateRange.end}).length},docsTimingSign:function(t){var e=t.docs.filter(function(t){return"resolved"===t.globalStatus}).filter(function(e){return e.date>=t.dateRange.start&&e.date<=t.dateRange.end});if(!e.length)return 0;var r=0;e.forEach(function(t){t.routes.forEach(function(t){r+=t.dateSigning-t.dateIncoming}),r/=t.routes.length}),r/=e.length;var n=v(r);return"Часов: "+n.hours+", минут: "+n.minutes+", секунд: "+n.seconds},docsTimingResolve:function(t){var e=t.docs.filter(function(t){return"resolved"===t.globalStatus}).filter(function(e){return e.date>=t.dateRange.start&&e.date<=t.dateRange.end});if(!e.length)return 0;var r=0;e.forEach(function(t){r+=t.resolveDate-t.date}),r/=e.length;var n=v(r);return"Часов: "+n.hours+", минут: "+n.minutes+", секунд: "+n.seconds},usersStat:function(t){var e=t.docs.filter(function(e){return e.date>=t.dateRange.start&&e.date<=t.dateRange.end}),r=[],n=S.getters["groupsStore/groups"][0],s=null;return n&&(s=n.users.filter(function(t){return"Admin"!==t.role})),s&&(r={fields:[{key:"author",label:"ФИО",sortable:!0},{key:"role",label:"Роль",sortable:!0},{key:"created",label:"Опубликовал документов",sortable:!0},{key:"resolvedDocs",label:"Принятые документы",sortable:!0},{key:"rejectedDocs",label:"Отказанные документы",sortable:!0},{key:"signings",label:"Поставленные подписи",sortable:!0},{key:"rejecteds",label:"Отказал в подписи",sortable:!0}],items:[]},s.forEach(function(t){r.items.push({author:t.author,role:t.role,resolvedDocs:e.filter(function(e){return e.author_id===t._id&&"resolved"===e.globalStatus}).length,rejectedDocs:e.filter(function(e){return e.author_id===t._id&&"archieved"===e.globalStatus}).length,signings:e.filter(function(e){return e.routes.find(function(e){return e._id===t._id&&"resolve"===e.status})?e:null}).length,rejecteds:e.filter(function(e){return e.routes.find(function(e){return e._id===t._id&&"reject"===e.status})?e:null}).length,created:e.filter(function(e){return e.author_id===t._id}).length})})),r}},actions:{getDocsStat:function(t){return d.statApi.getDocsStat(S.getters.headerToken).then(function(e){t.state.docs=e}).catch(function(t){throw new Error(t.message)})}}},w=r("aMZi");n.a.use(c.a);var S=new c.a.Store({state:{token:"",privateKey:{}},getters:{headerToken:function(t){return{headers:{token:t.token}}},privateKey:function(t){return t.privateKey}},modules:{usersStore:m,docsStore:b,groupsStore:g,statStore:_},mutations:{setToken:function(t,e){sessionStorage.setItem("token",e),t.token=e},clearToken:function(t){sessionStorage.removeItem("token"),t.token=""},setKey:function(t,e){t.privateKey=e},clearKey:function(t){sessionStorage.removeItem("privateKey"),t.privateKey=""}},actions:{initApp:function(t){return new i.a(function(e){var r=sessionStorage.getItem("token");r?(t.commit("setToken",r),S.dispatch("usersStore/getCurrentUser").then(function(){return S.dispatch("groupsStore/getCurrentGroup")}).then(function(){return e()})):e()})},logout:function(t){return d.logout().then(function(e){S.state.usersStore.user={},S.state.groupsStore.data=[],t.commit("clearToken"),t.commit("clearKey")})},logIn:function(t,e){var r=e.login,n=e.passphrase,s=e.privateKeyFile;return new i.a(function(e,o){var a=new FileReader;a.readAsText(s,"utf-8"),a.onload=function(s){var a="";t.dispatch("decryptPrivateKey",{privateKey:s.target.result,passphrase:n}).then(function(){return t.dispatch("createAuthCertificate")}).then(function(t){return d.logIn({userLogin:r,certificate:t.data}).catch(function(t){throw new Error(t.message)})}).then(function(e){return a=e.message,t.commit("setToken",e.token),S.dispatch("usersStore/getCurrentUser")}).then(function(t){return e(a)}).catch(function(t){return o(t)})}})},logInAdmin:function(t,e){return d.logInAdmin(e).then(function(e){return t.commit("setToken",e.token),S.dispatch("usersStore/getCurrentUser").then(function(){return S.dispatch("groupsStore/getCurrentGroup").then(function(){return e.message})})}).catch(function(t){throw new Error(t.message)})},decryptPrivateKey:function(t,e){var r=e.privateKey,n=e.passphrase;return new i.a(function(e,s){var o=w.key.readArmored(r).keys[0];o.decrypt(n)?(console.log("Privkey obj",o),t.commit("setKey",o),e()):(t.commit("clearKey"),s(new Error("Неверная парольная фраза!")))})},createAuthCertificate:function(t){var e=Date.now().toString();return w.sign({data:e,privateKeys:t.state.privateKey,date:Date.now()})}}}),U=r("/ocq"),C=[{path:"/",component:r("DB7B")},{path:"/edms",component:r("1GYb")},{path:"/edms/addNew",component:r("q60J")},{path:"/edms/myDocuments",component:r("Bio6")},{path:"/edms/myDocuments/:id",component:r("XTiY")},{path:"/edms/myDocumentEdit/:id",component:r("x/4f")},{path:"/edms/archive",component:r("sCE0")},{path:"/edms/archive/:id",component:r("Qm7s")},{path:"/edms/admin",component:r("QxDH")},{path:"/edms/superAdmin",component:r("yDVY")},{path:"/edms/404",component:r("thLP")},{path:"/edms/:id",component:r("bwAQ")},{path:"*",component:r("thLP")}];n.a.use(U.a);var y=new U.a({routes:C,mode:"history"}),x=!1;y.beforeResolve(function(t,e,r){var n=S.state.token;if(x&&(x=!1,r()),n)switch(S.state.usersStore.user.role){case"Admin":x=!0,r("/edms/admin");break;case"superAdmin":x=!0,r("/edms/superAdmin");break;default:x=!0,"/edms/admin"!==t.path&&"/edms/superAdmin"!==t.path?r():r("/edms")}else x=!0,"/"===t.path?r():r("/")});var D=y,A=r("e6fC"),k=r("9JMe");Object(k.sync)(S,D),n.a.use(A.a),S.dispatch("initApp").then(function(){new n.a({el:"#app",store:S,router:D,render:function(t){return t(o.a)}})})},NiK3:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Dd8w"),s=r.n(n),o=r("NYxO"),a=r("f5j3");e.default={data:function(){return{loaded:!1}},computed:s()({},Object(o.c)("docsStore",["documents"]),{sortingData:function(){return this.documents.slice(0).sort(function(t,e){return t.date<=e.date})}}),methods:s()({},Object(o.b)("docsStore",["getOurDocuments"]),{toDateString:a.a}),created:function(){var t=this;this.getOurDocuments().then(function(){t.loaded=!0})}}},Nj6X:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("mvHQ"),s=r.n(n),o=r("Dd8w"),a=r.n(o),i=r("NYxO");e.default={data:function(){return{date:"",docName:"",docVersion:"1.0.0",docDescription:"",file:"",selectedUsers:[],infoAlert:"",previewDoc:"",percentLoaded:0}},computed:a()({},Object(i.c)("usersStore",["currentUser"])),methods:a()({},Object(i.b)("docsStore",["addNewDocument"]),Object(i.b)("usersStore",["getAllUsersFromGroup"]),{dateUpd:function(t){this.date=t},getFile:function(t){var e=t.target.files[0];e&&(e.size/1024>5e4?this.showAlert("Загружаемый файл должен быть меньше 50 МБ!"):(this.file=e,this.previewDoc=""+URL.createObjectURL(e)))},updateSelectedUser:function(t){this.selectedUsers=t},addNewDoc:function(t){var e=this;if(this.selectedUsers.length)if(this.docDescription){this.$refs.submit.disabled=!0;var r=new FormData;r.append("title",this.docName),r.append("date",Date.now()),r.append("author",this.currentUser.author),r.append("author_id",this.currentUser._id),r.append("total",this.selectedUsers.length),r.append("groupToken",this.currentUser.groupInvite),r.append("routes",s()(this.selectedUsers)),r.append("file",this.file),r.append("version",this.docVersion),r.append("description",this.docDescription),this.addNewDocument(r).then(function(r){e.showAlert(r.message),t.target.reset(),e.$refs.fileInput.reset(),e.selectedUsers=[],e.previewDoc="",e.$refs.submit.disabled=!1}).catch(function(t){e.showAlert(t.message)})}else this.showAlert("Укажите описание!");else this.showAlert("Укажите исполнителей!")},showAlert:function(t){this.infoAlert=t,this.$refs.alertModal.show()}}),created:function(){this.getAllUsersFromGroup()},components:{chooseAuthors:r("IUVv"),authorsList:r("6acm"),appTimer:r("jGXC"),presetRoutes:r("4z3Q"),pdfReader:r("XPmI")}}},OQeb:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Dd8w"),s=r.n(n),o=r("NYxO"),a=r("f5j3");e.default={data:function(){return{loaded:!1}},computed:s()({},Object(o.c)("docsStore",["documents"]),Object(o.c)("usersStore",["currentUser"]),{sortingData:function(){return this.documents.length?this.documents.slice(0).sort(function(t,e){return t.date<=e.date}):[]}}),methods:s()({},Object(o.b)("docsStore",["getPreviews"]),Object(o.b)("usersStore",["getCurrentUser"]),{toDateString:a.a,incomingDate:function(t){var e=this,r=t.routes.find(function(t){return t.author===e.currentUser.author});return this.toDateString(+r.dateIncoming)}}),created:function(){var t=this;this.getPreviews().then(function(){t.loaded=!0}).catch(function(){t.$router.push("/")})}}},OUKj:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-card",{staticClass:"mt-3"},[r("b-form-group",{attrs:{label:"Выстроить список виз:","label-for":"authors"}},[r("b-form-input",{attrs:{type:"text",placeholder:"Начните поиск по ФИО или Роли"},model:{value:t.authorNameOrRole,callback:function(e){t.authorNameOrRole=e},expression:"authorNameOrRole"}})],1),r("b-form-group",{attrs:{label:"Или выберите готовый список:"}},[r("b-form-select",{attrs:{options:t.presetsOptions},model:{value:t.selectedPreset,callback:function(e){t.selectedPreset=e},expression:"selectedPreset"}})],1),r("b-form-group",{attrs:{label:"Список доступных ролей","label-for":"authors"}},[r("b-list-group",{staticClass:"authors-list",attrs:{id:"authors"}},t._l(t.computedUsers,function(e){return r("b-list-group-item",{key:e.author,staticClass:"authors-list__item",on:{click:function(r){t.addAuthor(e)}}},[r("h3",{staticClass:"subtitle subtitle_small"},[t._v("ФИО: "+t._s(e.author))]),r("p",{staticClass:"subtitle subtitle_small"},[t._v("Роль: "+t._s(e.role))])])}))],1)],1)},staticRenderFns:[]}},POKh:function(t,e,r){var n=r("VU/8")(r("MbgV"),null,!1,function(t){r("8Y90")},null,null);t.exports=n.exports},PxtK:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"footer"},[e("b-row",{attrs:{"align-h":"center"}},[e("p",{staticClass:"text",staticStyle:{color:"#ffffff"}},[this._v("2018 Created by Mihail Pogosyan (Ascold)")])])],1)},staticRenderFns:[]}},Qm7s:function(t,e,r){var n=r("VU/8")(r("z4Se"),r("W7v6"),!1,null,null,null);t.exports=n.exports},QxDH:function(t,e,r){var n=r("VU/8")(r("IPEZ"),r("lnPM"),!1,function(t){r("0QnP")},"data-v-accda404",null);t.exports=n.exports},SF59:function(t,e,r){var n=r("VU/8")(r("q5Z7"),r("pbC5"),!1,null,null,null);t.exports=n.exports},SPHP:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bg"},[e("b-container",[e("b-row",{attrs:{"align-h":"center","align-v":"center"}},[e("b-col",{attrs:{sm:"10",md:"8",lg:"5"}},[e("b-card",{attrs:{title:"Авторизоваться"}},[e("sign-in")],1)],1)],1)],1)],1)},staticRenderFns:[]}},SjSr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Dd8w"),s=r.n(n),o=r("NYxO"),a=r("f5j3");e.default={data:function(){return{id:this.$router.currentRoute.params.id,selected:"",options:[{value:"resolve",text:"Подписать документ"},{value:"reject",text:"Отказать в подписи"}],comment:"",infoAlert:"",rejected:!1}},computed:s()({},Object(o.c)("docsStore",["document"]),Object(o.c)("usersStore",["currentUser"]),Object(o.c)(["privateKey"])),methods:s()({},Object(o.b)("docsStore",["getDocumentById","postVote"]),{toDateString:a.a,submitDoc:function(t){var e=this;this.selected&&this.comment&&this.postVote({id:this.id,vote:this.selected,comment:this.comment,author:this.currentUser}).then(function(r){"reject"===e.selected&&(e.rejected=!0),e.showAlert(r.message),t.target.reset(),e.getDocumentById(e.id)}).catch(function(t){e.showAlert("Произошла ошибка: "+t.message)})},showAlert:function(t){this.infoAlert=t,this.$refs.alertModal.show()}}),created:function(){var t=this;this.getDocumentById(this.id).catch(function(){t.$router.push("404")})},components:{docTabs:r("XRoe"),signersList:r("IiRR")}}},UHoW:function(t,e,r){var n=r("VU/8")(r("dMY6"),r("JPyM"),!1,null,null,null);t.exports=n.exports},ULW9:function(t,e){},W7v6:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bg-simple"},[e("b-container",[e("b-row",[e("b-col",[e("b-card",{staticClass:"mb-3"},[e("h1",{staticClass:"title"},[this._v(this._s(this.document.title))])])],1)],1),e("b-row",[e("b-col",["resolved"===this.document.globalStatus?e("b-alert",{attrs:{show:"show",variant:"success"}},[this._v("Документ успешно принят")]):e("b-alert",{attrs:{show:"show",variant:"warning"}},[this._v("Документ отказан в подписи и помещен в архив")]),e("doc-tabs")],1)],1),e("b-row",[e("b-col",{attrs:{sm:"12"}},[e("signers-list",{attrs:{rejected:!1}})],1)],1)],1)],1)},staticRenderFns:[]}},XPmI:function(t,e,r){var n=r("VU/8")(r("wobF"),r("GHAU"),!1,function(t){r("ULW9")},"data-v-b4445464",null);t.exports=n.exports},XRoe:function(t,e,r){var n=r("VU/8")(r("g6Cy"),r("A9Dh"),!1,null,null,null);t.exports=n.exports},XTiY:function(t,e,r){var n=r("VU/8")(r("m4RX"),r("ZYDq"),!1,null,null,null);t.exports=n.exports},XoPQ:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bg-simple"},[r("b-container",[r("b-row",[r("b-col",[r("b-card",{staticClass:"mb-3"},[r("h1",{staticClass:"title"},[t._v("Добавить новый документ")]),r("app-timer",{on:{dateUpdate:t.dateUpd}})],1)],1)],1),r("b-row",[r("b-col",[r("b-form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(e){e.preventDefault(),e.stopPropagation(),t.addNewDoc(e)}}},[r("b-row",[r("b-col",{attrs:{md:"12",lg:"6"}},[r("b-card",[r("b-form-group",{attrs:{label:"Название документа:","label-for":"docname",description:"Добавьте название документа"}},[r("b-form-input",{attrs:{id:"docname",type:"text",required:"required",placeholder:"Введите название документа"},model:{value:t.docName,callback:function(e){t.docName=e},expression:"docName"}})],1),r("b-form-group",{attrs:{label:"Файл:","label-for":"file",description:"Добавьте файл документа"}},[r("b-form-file",{ref:"fileInput",attrs:{id:"file","choose-label":"Выберите файл",accept:".pdf",required:"required"},on:{change:function(e){t.getFile(e)}}})],1),t.previewDoc?r("pdfReader",{attrs:{src:t.previewDoc}}):r("div",{staticClass:"empty-pdf"},[t._v("Загрузите файл документа")]),r("b-form-group",{staticClass:"mt-3",attrs:{label:"Введите краткое описание документа"}},[r("b-form-textarea",{attrs:{placeholder:"Описание..",rows:3,"max-rows":6},model:{value:t.docDescription,callback:function(e){t.docDescription=e},expression:"docDescription"}})],1)],1)],1),r("b-col",{attrs:{md:"12",lg:"6"}},[r("preset-routes",{on:{choosePreset:t.updateSelectedUser}}),r("choose-authors",{attrs:{selectedUsers:t.selectedUsers},on:{updateSelectedUsers:t.updateSelectedUser}})],1)],1),r("b-row",{staticClass:"mt-3"},[r("b-col",[r("b-card",[r("authors-list",{attrs:{selectedUsers:t.selectedUsers},on:{updateSelectedUser:t.updateSelectedUser}})],1)],1)],1),r("b-button",{ref:"submit",staticClass:"mt-3",attrs:{type:"submit"}},[t._v("Опубликовать")])],1)],1)],1),r("b-modal",{ref:"alertModal",attrs:{"hide-footer":"hide-footer"}},[t._v(t._s(t.infoAlert))])],1)],1)},staticRenderFns:[]}},Y2OG:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.rejected?r("b-alert",{attrs:{show:"show",variant:"danger"}},[t._v("Документ отказан в подписи Вами")]):r("b-tabs",[t.signedAuthors.length?r("b-tab",{attrs:{title:"Подписавшие"}},[r("b-list-group",{staticClass:"signers-list"},t._l(t.signedAuthors,function(e){return r("b-list-group-item",{key:e._id,attrs:{variant:"success"}},[r("p",{staticClass:"subtitle subtitle_small"},[t._v(t._s(e.author))]),r("p",{staticClass:"subtitle subtitle_small"},[t._v(t._s(e.role))]),r("p",{staticClass:"subtitle subtitle_small"},[t._v("Время подписи: "+t._s(t.toDateString(+e.dateSigning)))]),e.comment?r("b-card",{staticClass:"mt-1"},[r("p",{staticClass:"text"},[t._v("Комментарий подписанта:")]),r("p",{staticClass:"text"},[t._v(t._s(e.comment))])]):t._e()],1)}))],1):t._e(),t.waitingAuthors.length?r("b-tab",{attrs:{title:"В очереди на подпись"}},[r("b-list-group",{staticClass:"signers-list"},t._l(t.waitingAuthors,function(e){return r("b-list-group-item",{key:e._id,attrs:{variant:"primary"}},[r("p",{staticClass:"subtitle subtitle_small"},[t._v(t._s(e.author))]),r("p",{staticClass:"subtitle subtitle_small"},[t._v(t._s(e.role))]),e.comment?r("b-card",{staticClass:"mt-1"},[r("p",{staticClass:"text"},[t._v("Комментарий подписанта:")]),r("p",{staticClass:"text"},[t._v(t._s(e.comment))])]):t._e()],1)}))],1):t._e()],1)},staticRenderFns:[]}},YZST:function(t,e){},ZYDq:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bg-simple"},[r("b-container",[r("b-row",[r("b-col",{staticClass:"mb-3",attrs:{sm:"12"}},[r("b-card",[r("h1",{staticClass:"title"},[t._v(t._s(t.document.title))])])],1),r("b-col",{staticClass:"mb-3",attrs:{sm:"12"}},[t.document.author&&t.document.date&&t.document.versions?r("b-card",[r("time",{staticClass:"text"},[t._v("Дата первой публикации "+t._s(t.toDateString(+t.document.date)))]),t.document.versions.lenght>1?r("p",{staticClass:"text"},[t._v("Текущая версия документа "+t._s(t.document.versions[0].version))]):t._e(),t.document.versions.lenght>1?r("time",{staticClass:"text"},[t._v("Дата публикации версии "+t._s(t.document.versions[0].version)+": "+t._s(t.document.versions[0].date))]):t._e()]):t._e()],1)],1),r("b-row",[r("b-col",[r("doc-tabs")],1)],1),r("b-row",[r("b-col",[r("signers-list",{attrs:{rejected:!1}})],1),r("b-col",{attrs:{sm:"12",lg:"6"}},["resolved"===t.document.globalStatus?r("b-alert",{staticClass:"mb-0",attrs:{variant:"success",show:"show"}},[t._v("Документ успешно подписан, его можно найти в"),r("router-link",{attrs:{to:"/edms/archive/"+t.document._id}},[t._v("Архиве")])],1):t._e(),"waiting"===t.document.globalStatus?r("b-alert",{staticClass:"mb-0",attrs:{variant:"primary",show:"show"}},[t._v("Документ на стадии рассмотрения. Сейчас его рассматривает: "+t._s(t.closerViewer))]):t._e(),"rejected"===t.document.globalStatus?r("div",[r("b-alert",{attrs:{variant:"danger",show:"show"}},[t._v("Документ отказан в подписи. Вы можете его доработать или закрыть."),r("b-card",{staticClass:"mb-3"},[r("p",{staticClass:"subtitle subtitle_small"},[t._v(t._s(t.document.versions[0].rejectReason))])])],1),r("b-button",{staticClass:"mr-3 mb-3",attrs:{id:"toArchive",size:"md"},on:{click:t.closeDocument}},[t._v("Закрыть документ")]),r("router-link",{staticClass:"btn btn-success btn-md mb-3",attrs:{id:"editDocument",to:"/edms/myDocumentEdit/"+t.id}},[t._v("Доработать документ")]),r("b-tooltip",{attrs:{target:"editDocument",title:"Перейти в редактор версий"}}),r("b-tooltip",{attrs:{target:"toArchive",title:"Документ отправится в архив"}})],1):t._e()],1)],1)],1)],1)},staticRenderFns:[]}},bhmT:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bg-simple"},[r("b-container",[r("b-row",[r("b-col",{staticClass:"mb-6",attrs:{sm:"12"}},[r("b-card",[r("h1",{staticClass:"title"},[t._v(t._s(t.document.title))]),r("app-timer",{on:{dateUpdate:t.dateUpd}})],1)],1)],1),r("b-row",[r("b-col",[r("b-card",{staticClass:"mt-3"},[r("b-form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(e){e.preventDefault(),e.stopPropagation(),t.addNewVersion(e)}}},[r("b-form-group",{attrs:{label:"Название версии:","label-for":"version",description:"Добавьте версию документа"}},[r("b-form-input",{attrs:{id:"version",placeholder:"Название версии",required:"required"},model:{value:t.docVersion,callback:function(e){t.docVersion=e},expression:"docVersion"}})],1),r("b-form-group",{attrs:{label:"Файл:","label-for":"file",description:"Добавьте файл документа"}},[r("b-form-file",{ref:"fileInput",attrs:{id:"file","choose-label":"Выберите файл",accept:".pdf",required:"required"},on:{change:function(e){t.getFile(e)}}})],1),t.previewDoc?r("pdf-reader",{attrs:{src:t.previewDoc}}):r("div",{staticClass:"empty-pdf"},[t._v("Загрузите файл документа")]),r("b-form-group",{staticClass:"mt-3",attrs:{label:"Введите краткое описание версии"}},[r("b-form-textarea",{attrs:{placeholder:"Описание..",rows:3,"max-rows":6},model:{value:t.docDescription,callback:function(e){t.docDescription=e},expression:"docDescription"}})],1),r("b-button",{attrs:{type:"submit"}},[t._v("Опубликовать")])],1)],1)],1)],1)],1),r("b-modal",{ref:"alertModal",attrs:{"hide-footer":"hide-footer"}},[t._v(t._s(t.infoAlert))])],1)},staticRenderFns:[]}},bwAQ:function(t,e,r){var n=r("VU/8")(r("SjSr"),r("EHk7"),!1,null,null,null);t.exports=n.exports},cOAU:function(t,e,r){var n=r("VU/8")(r("DL3K"),r("vYjY"),!1,function(t){r("q4N2")},"data-v-66299644",null);t.exports=n.exports},cfAL:function(t,e,r){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"info"}},[n("b-navbar-brand",{attrs:{to:"/edms"}},[n("img",{staticClass:"logo",attrs:{src:r("dLd/")}})]),"indexBar"!==t.show?n("div",{staticClass:"acc-title"},[t._v(t._s(t.currentUser.author))]):t._e(),n("b-collapse",{attrs:{"is-nav":"is-nav",id:"nav_collapse"}},["userBar"===t.show?n("b-navbar-nav",{staticClass:"ml-auto"},[n("router-link",{staticClass:"nav-item nav-link",attrs:{to:"/edms"}},[t._v("Новые")]),n("router-link",{staticClass:"nav-item nav-link",attrs:{to:"/edms/addNew"}},[t._v("Добавить")]),n("router-link",{staticClass:"nav-item nav-link",attrs:{to:"/edms/myDocuments"}},[t._v("Мои документы")]),n("router-link",{staticClass:"nav-item nav-link",attrs:{to:"/edms/archive"}},[t._v("Архив")]),n("b-button",{staticClass:"my-2 my-sm-0",attrs:{size:"sm",type:"button"},on:{click:t.logOut}},[t._v("Выйти")])],1):t._e(),"adminBar"===t.show?n("b-navbar-nav",{staticClass:"ml-auto"},[n("router-link",{staticClass:"nav-item nav-link",attrs:{to:"/edms/admin"}},[t._v("Панель администрирования админа")]),n("b-button",{staticClass:"my-2 my-sm-0",attrs:{size:"sm",type:"button"},on:{click:t.logOut}},[t._v("Выйти")])],1):t._e(),"superadminBar"===t.show?n("b-navbar-nav",{staticClass:"ml-auto"},[n("router-link",{staticClass:"nav-item nav-link",attrs:{to:"/edms/superAdmin"}},[t._v("Панель администрирования суперадмина")]),n("b-button",{staticClass:"my-2 my-sm-0",attrs:{size:"sm",type:"button"},on:{click:t.logOut}},[t._v("Выйти")])],1):t._e()],1),"indexBar"!==t.show?n("b-navbar-toggle",{attrs:{target:"nav_collapse"}}):t._e()],1)},staticRenderFns:[]}},ckBy:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Dd8w"),s=r.n(n),o=r("NYxO");e.default={data:function(){return{userLogin:"",userPassword:"",passphrase:"",privateKeyFile:null,success:!1,error:""}},methods:s()({},Object(o.b)("usersStore",["getCurrentUser"]),Object(o.b)(["logIn","logInAdmin"]),{signIn:function(t){var e=this;this.logIn({login:this.userLogin,passphrase:this.passphrase,privateKeyFile:this.privateKeyFile}).then(function(){e.success=!0,e.error="",e.$router.push("edms")}).catch(function(t){e.success=!1,e.error=t.message})},signInAdmin:function(t){var e=this;this.logInAdmin({userLogin:this.userLogin,userPassword:this.userPassword}).then(function(){e.success=!0,e.error="",e.getCurrentUser().then(function(){e.$router.push("edms/admin")})}).catch(function(t){e.success=!1,e.error=t.message})}})}},dAhr:function(t,e,r){var n=r("VU/8")(r("mcfJ"),null,!1,function(t){r("AgTH")},null,null);t.exports=n.exports},"dLd/":function(t,e,r){t.exports=r.p+"static/img/logo.c875a34.png"},dMY6:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("BO1k"),s=r.n(n),o=r("Dd8w"),a=r.n(o),i=r("NYxO"),c=function(t){for(var e=[0,1,2,3,4,5,6,7,8,9],r=["a","b","c","d","e","f","g","h","j","k","l","m","n","o","p","r","s","t","u","v","w","x","y","z"],n="",s=0;s<t;s++)n+=Math.random(1,2)<.5?e[Math.ceil(9*Math.random(0,e.length-1))]:r[Math.ceil(9*Math.random(0,r.length-1))];return n};e.default={data:function(){return{admin:{email:"",groupId:""}}},methods:a()({},Object(i.b)("groupsStore",["createNewAdmin"]),{generateInvite:function(){return c(5)},createAdmin:function(){var t=this;this.createNewAdmin(a()({},this.admin)).then(function(e){t.$refs.createAdminForm.reset(),t.$emit("alert",e.message)}).catch(function(e){t.$emit("alert",e.message)})}}),computed:a()({},Object(i.c)("groupsStore",["groups"]),{groupsOptions:function(){var t=[{value:"",text:"Не выбрано"}],e=!0,r=!1,n=void 0;try{for(var o,a=s()(this.groups);!(e=(o=a.next()).done);e=!0){var i=o.value;t.push({value:i._id,text:i.name})}}catch(t){r=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(r)throw n}}return t}})}},ePUA:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Dd8w"),s=r.n(n),o=r("NYxO");e.default={data:function(){return{selectedUsers:[],presetName:""}},computed:Object(o.c)("usersStore",["currentUser"]),methods:s()({},Object(o.b)("docsStore",["createPreset","getPresets"]),{showEditor:function(){this.$refs.routesEditor.show()},updatePresetRoute:function(t){this.selectedUsers=t},createNewPreset:function(t){var e=this,r={title:this.presetName,routes:this.selectedUsers,group:this.currentUser.groupInvite};this.createPreset(r).then(function(r){t.target.reset(),e.selectedUsers=[],e.$refs.routesEditor.hide(),e.getPresets()})}}),components:{chooseAuthors:r("IUVv"),authorsList:r("6acm")}}},f5j3:function(t,e,r){"use strict";e.a=function(t){var e=new Date(t);return(e.getDate()<10?"0"+e.getDate():e.getDate())+"."+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"."+e.getFullYear()+" - "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())}},fVla:function(t,e){t.exports={render:function(){var t=this.$createElement;return(this._self._c||t)("time",{staticClass:"date"},[this._v("Текущее время: "+this._s(this.date))])},staticRenderFns:[]}},g6Cy:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Dd8w"),s=r.n(n),o=r("NYxO");e.default={computed:s()({},Object(o.c)("docsStore",["document","checked"])),components:{pdfReader:r("XPmI")}}},gVe5:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{userForMail:{token:"",login:"",email:""},info:""}},methods:{openInfo:function(t){this.info=t,this.$refs.infoModal.show()}},components:{createGroup:r("cOAU"),createAdmin:r("UHoW"),groupsList:r("SF59")}}},humj:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Dd8w"),s=r.n(n),o=r("NYxO"),a=r("f5j3");e.default={props:{rejected:Boolean},methods:{toDateString:a.a},computed:s()({},Object(o.c)("docsStore",["document"]),{signedAuthors:function(){return this.document.routes?this.document.routes.filter(function(t){return"resolve"===t.status}):[]},waitingAuthors:function(){return this.document.routes?this.document.routes.filter(function(t){return"waiting"===t.status}):[]}})}},jDSw:function(t,e,r){var n=r("VU/8")(r("BNfl"),r("IXLF"),!1,function(t){r("Jncd")},"data-v-43acfb6e",null);t.exports=n.exports},jGXC:function(t,e,r){var n=r("VU/8")(r("BwF3"),r("fVla"),!1,null,null,null);t.exports=n.exports},kpRs:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bg"},[r("b-container",[r("b-card",{staticClass:"mb-3"},[r("h2",{staticClass:"title"},[t._v("Документы к подписанию")])]),r("b-list-group",[t.loaded?t._e():r("b-alert",{attrs:{variant:"primary",show:"show"}},[t._v("Загрузка...")]),t.loaded&&!t.sortingData.length?r("b-alert",{attrs:{variant:"danger",show:"show"}},[t._v("Новых документов к рассмотрению нет")]):t._e(),t._l(t.sortingData,function(e){return r("router-link",{key:e._id,staticClass:"list-group-item preview-item list-group-item-action",attrs:{to:"/edms/"+e._id}},[r("div",{staticClass:"preview-item__icon waiting"},[r("i",{staticClass:"fa fa-file-text-o",attrs:{"aria-hidden":"true"}})]),r("h2",{staticClass:"preview-item__title"},[t._v(t._s(e.title))]),r("time",{staticClass:"preview-item__date"},[t._v("Дата публикации: "+t._s(t.toDateString(+e.date)))]),r("span",{staticClass:"preview-item__author"},[t._v("Автор публикации: "+t._s(e.author))]),r("span",{staticClass:"preview-item__state"},[t._v("Текущий маршрут: "+t._s(e.state)+" / "+t._s(e.total))]),r("span",{staticClass:"preview-item__incoming"},[t._v("Время открытия визы: "+t._s(t.incomingDate(e)))])])})],2)],1)],1)},staticRenderFns:[]}},lnPM:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",[r("section",{staticClass:"admin"},[r("h1",{staticClass:"title"},[t._v("Панель администратора "+t._s(t.group.name))]),r("b-tabs",{staticClass:"mt-3"},[r("b-tab",{attrs:{title:"Создать роль в группе"}},[r("b-row",[r("b-col",[r("b-form",{staticClass:"mb-3 mt-3",on:{submit:function(e){e.preventDefault(),t.createUser(e)}}},[r("b-form-group",{attrs:{label:"ФИО владельца"}},[r("b-form-input",{attrs:{type:"text",placeholder:"Фамилия Имя Отчество",required:"required"},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}})],1),r("b-form-group",{attrs:{label:"Название роли пользователя"}},[r("b-form-input",{attrs:{type:"text",required:"required",placeholder:"Роль"},model:{value:t.user.role,callback:function(e){t.$set(t.user,"role",e)},expression:"user.role"}})],1),r("b-form-group",{attrs:{label:"Срок действия сертификата, суток"}},[r("b-form-input",{attrs:{type:"number",placeholder:"0 - неограничено",required:"required"},model:{value:t.user.cerTime,callback:function(e){t.$set(t.user,"cerTime",e)},expression:"user.cerTime"}})],1),r("b-form-group",{attrs:{label:"Введите email пользователя",description:"На него отправится уведомление и ключи подписи!"}},[r("b-form-input",{attrs:{type:"email",required:"required",placeholder:"example@mail.ua"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1),r("b-button",{attrs:{type:"submit"}},[t._v("Создать")])],1)],1),r("b-col",{staticClass:"mt-3"},[r("h2",{staticClass:"subtitle"},[t._v("Пользователи группы "+t._s(t.group.name))]),r("b-list-group",{staticClass:"users-list"},t._l(t.users,function(e){return r("b-list-group-item",{key:e._id},[r("h4",[t._v(t._s(e.author))]),r("p",[t._v("Роль: "+t._s(e.role))]),e.dateRegistration?r("p",[t._v("Зарегистрирован: "+t._s(t.toDateString(+e.dateRegistration)))]):t._e()])}))],1)],1)],1),r("b-tab",{attrs:{title:"Статистика группы"}},[r("users-stat")],1)],1)],1),r("b-modal",{ref:"infoModal",attrs:{title:"Сообщение"}},[t._v(t._s(t.info))])],1)},staticRenderFns:[]}},m4RX:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Dd8w"),s=r.n(n),o=r("NYxO"),a=r("f5j3");e.default={data:function(){return{id:this.$router.currentRoute.params.id}},computed:s()({},Object(o.c)("docsStore",["document"]),{closerViewer:function(){return this.document.routes.find(function(t){return"waiting"===t.status}).author}}),methods:s()({},Object(o.b)("docsStore",["getMyDocumentById","closeDocumentById"]),{toDateString:a.a,closeDocument:function(){this.closeDocumentById(this.id)}}),created:function(){var t=this;this.getMyDocumentById(this.id).catch(function(e){t.$router.push("404")})},components:{docTabs:r("XRoe"),signersList:r("IiRR")}}},mcfJ:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("iwQb");if("server"===Object({NODE_ENV:"production"}).VUE_ENV)var s=Object(n.a)({});else{var o=r("ytml").default,a=r("N1Pc");s=Object(n.a)(o(a))}e.default=s},pbC5:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-row",[r("b-col",[r("h2",{staticClass:"subtitle mb-2"},[t._v("Список групп"),r("b-tabs",{staticClass:"users-list",attrs:{vertical:"vertical",card:"card",pills:"pills"}},t._l(t.groups,function(e){return r("b-tab",{key:e._id,attrs:{title:e.name+" Пользователей: "+e.users.length}},[r("b-list-group",t._l(e.users,function(n){return r("b-list-group-item",{key:n._id},[r("h4",[t._v(t._s(n.author?n.author:"Не зарегистрирован"))]),r("p",{staticClass:"small"},[t._v("Роль: "+t._s(n.role?n.role:"Не зарегистрирован"))]),r("p",{staticClass:"small"},[t._v("Дата регистрации: "+t._s(t.toDateString(+n.dateRegistration)))]),r("p",{staticClass:"small"},[t._v("Email: "+t._s(n.email))]),r("p",{staticClass:"small"},[t._v("Login: "+t._s(n.login))]),"Admin"===n.role?r("b-button-group",[r("b-button",{attrs:{variant:"secondary"},on:{click:function(e){t.openSendModal(n._id,n.email)}}},[t._v("Отправить доступ повторно")]),r("b-button",{attrs:{variant:"warning"},on:{click:function(r){t.deleteAdmin(n._id,e._id)}}},[t._v("Удалить администратора")])],1):t._e()],1)}))],1)}))],1)]),r("b-modal",{ref:"sendModal",attrs:{title:"Укажите почту, на которую отправится доступ"},on:{ok:t.submitSend}},[r("b-form-group",{attrs:{label:"Email администратора"}},[r("b-form-input",{attrs:{type:"email"},model:{value:t.admin.email,callback:function(e){t.$set(t.admin,"email",e)},expression:"admin.email"}})],1)],1)],1)},staticRenderFns:[]}},q4N2:function(t,e){},q5Z7:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Dd8w"),s=r.n(n),o=r("NYxO"),a=r("f5j3");e.default={data:function(){return{admin:{email:"",adminId:""}}},computed:s()({},Object(o.c)("groupsStore",["groups"])),methods:s()({},Object(o.b)("groupsStore",["getAllGroups","removeAdmin","sendInviteAdmin"]),{toDateString:a.a,deleteAdmin:function(t,e){this.removeAdmin({adminId:t,groupId:e})},openSendModal:function(t,e){this.admin={email:e,adminId:t},this.$refs.sendModal.show()},submitSend:function(){var t=this;console.log(this.admin),this.sendInviteAdmin(this.admin).then(function(e){console.log(e),t.$emit("alert",e.message)}).catch(function(e){return t.$emit("alert",e.message)})}}),created:function(){this.getAllGroups()}}},q60J:function(t,e,r){var n=r("VU/8")(r("Nj6X"),r("XoPQ"),!1,null,null,null);t.exports=n.exports},rz9y:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-col",[t.selectedUsers.length?r("b-form-group",{attrs:{label:"Список виз:","label-for":"authors-selected"}},[r("draggable",{staticClass:"list-group authors-list",attrs:{id:"authors-selected"},model:{value:t.selectedUsers,callback:function(e){t.selectedUsers=e},expression:"selectedUsers"}},t._l(t.selectedUsers,function(e){return r("b-list-group-item",{key:e.author,staticClass:"authors-item",attrs:{variant:"success",href:"#"}},[r("div",{staticClass:"authors-list__top"},[r("h3",{staticClass:"subtitle subtitle_small"},[t._v(t._s(e.author))]),r("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(r){t.removeAuthor(e)}}},[t._v("X")])]),r("p",{staticClass:"subtitle subtitle_small"},[t._v(t._s(e.role))]),r("p",{staticClass:"subtitle subtitle_small"},[t._v("Порядок в списке: "+t._s(t.selectedUsers.indexOf(e)+1))])])}))],1):r("b-alert",{attrs:{variant:"warning",show:"show"}},[t._v("Выберите исполнителей")])],1)},staticRenderFns:[]}},sCE0:function(t,e,r){var n=r("VU/8")(r("KLGY"),r("HqJY"),!1,null,null,null);t.exports=n.exports},"sw/x":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={components:{signIn:r("tHyd")}}},tHyd:function(t,e,r){var n=r("VU/8")(r("ckBy"),r("ufyX"),!1,null,null,null);t.exports=n.exports},thLP:function(t,e,r){var n=r("VU/8")(null,r("/DIP"),!1,null,null,null);t.exports=n.exports},"tpj+":function(t,e,r){var n=r("VU/8")(null,r("PxtK"),!1,null,null,null);t.exports=n.exports},ufyX:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-tabs",[r("b-tab",{attrs:{title:"Как пользователь"}},[r("b-form",{staticClass:"mt-3",on:{submit:function(e){e.preventDefault(),t.signIn(e)}}},[t.success?r("b-alert",{attrs:{varinat:"success",show:"show"}},[t._v("Вы успешно авторизовались!")]):t._e(),t.error?r("b-alert",{attrs:{variant:"danger",show:"show"}},[t._v(t._s(t.error))]):t._e(),r("b-form-group",{attrs:{label:"Ваш логин EDMS"}},[r("b-form-input",{attrs:{placeholder:"Логин",required:"required"},model:{value:t.userLogin,callback:function(e){t.userLogin=e},expression:"userLogin"}})],1),r("b-form-group",{attrs:{label:"Загрузите приватный ключ"}},[r("b-form-file",{attrs:{required:"required",accept:".key",placeholder:"Файл приватного ключа"},model:{value:t.privateKeyFile,callback:function(e){t.privateKeyFile=e},expression:"privateKeyFile"}})],1),r("b-form-group",{attrs:{label:"Введите парольную фразу"}},[r("b-form-input",{attrs:{type:"password",placeholder:"Парольная фраза ключа",required:"required"},model:{value:t.passphrase,callback:function(e){t.passphrase=e},expression:"passphrase"}})],1),r("b-button",{attrs:{type:"submit"}},[t._v("Авторизоваться")])],1)],1),r("b-tab",{attrs:{title:"Как администратор"}},[r("b-form",{staticClass:"mt-3",on:{submit:function(e){e.preventDefault(),t.signInAdmin(e)}}},[t.success?r("b-alert",{attrs:{varinat:"success",show:"show"}},[t._v("Вы успешно авторизовались!")]):t._e(),t.error?r("b-alert",{attrs:{variant:"danger",show:"show"}},[t._v(t._s(t.error))]):t._e(),r("b-form-group",{attrs:{label:"Введите логин"}},[r("b-form-input",{attrs:{type:"text",placeholder:"Ваш логин",required:"required"},model:{value:t.userLogin,callback:function(e){t.userLogin=e},expression:"userLogin"}})],1),r("b-form-group",{attrs:{label:"Введите пароль"}},[r("b-form-input",{attrs:{type:"password",placeholder:"Ваш пароль",required:"required"},model:{value:t.userPassword,callback:function(e){t.userPassword=e},expression:"userPassword"}})],1),r("b-button",{attrs:{type:"submit"}},[t._v("Авторизоваться")])],1)],1)],1)},staticRenderFns:[]}},vYjY:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-row",[r("b-col",[r("b-form",{ref:"createGroupForm",staticClass:"mb-3",on:{submit:function(e){e.preventDefault(),t.createGroup(e)}}},[r("h2",{staticClass:"subtitle mb-2"},[t._v("Создать новую группу")]),r("b-form-group",{attrs:{label:"Введите название группы"}},[r("b-form-input",{attrs:{type:"text",required:"required",placeholder:"Введите название группы"},model:{value:t.groupName,callback:function(e){t.groupName=e},expression:"groupName"}})],1),r("b-form-group",{attrs:{label:"e-mail администратора группы",description:"Внимание! На этот адрес будут высланы данные авторизации!"}},[r("b-form-input",{attrs:{type:"email",placeholder:"example@gmail.com",required:"required"},model:{value:t.adminEmail,callback:function(e){t.adminEmail=e},expression:"adminEmail"}})],1),r("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Создать группу")])],1)],1),r("b-modal",{ref:"alertModal",attrs:{title:"Внимание!"},on:{ok:t.submitForm}},[r("h3",[t._v("Проверьте данные!")]),r("b-form-group",{attrs:{label:"Название группы"}},[r("b-form-input",{attrs:{readonly:"readonly"},model:{value:t.groupName,callback:function(e){t.groupName=e},expression:"groupName"}})],1),r("b-form-group",{attrs:{label:"Email админстратора",description:"На эту почту будут высланы логин и пароль"}},[r("b-form-input",{model:{value:t.adminEmail,callback:function(e){t.adminEmail=e},expression:"adminEmail"}})],1)],1)],1)},staticRenderFns:[]}},wobF:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("dAhr"),s=r.n(n);e.default={props:{src:String},data:function(){return{numPages:void 0}},computed:{loadingTask:function(){return s.a.createLoadingTask(this.src)}},mounted:function(){var t=this;this.loadingTask.then(function(e){t.numPages=e.numPages})},components:{pdf:s.a}}},"x/4f":function(t,e,r){var n=r("VU/8")(r("LD2M"),r("bhmT"),!1,null,null,null);t.exports=n.exports},xJD8:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("1Pqu"),s=r.n(n),o=r("tpj+"),a=r.n(o);e.default={name:"app",components:{AppHeader:s.a,AppFooter:a.a}}},yDVY:function(t,e,r){var n=r("VU/8")(r("gVe5"),r("C1H1"),!1,function(t){r("CEYO")},"data-v-828d5d60",null);t.exports=n.exports},z4Se:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Dd8w"),s=r.n(n),o=r("NYxO"),a=r("f5j3");e.default={data:function(){return{id:this.$router.currentRoute.params.id}},computed:s()({},Object(o.c)("docsStore",["document"])),methods:s()({},Object(o.b)("docsStore",["getArchiveDocumentById"]),{toDateString:a.a}),created:function(){var t=this;this.getArchiveDocumentById(this.id).catch(function(e){t.$router.push("404")})},components:{docTabs:r("XRoe"),signersList:r("IiRR")}}},zj2Q:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d78ccda9ac222dfdef97.js.map